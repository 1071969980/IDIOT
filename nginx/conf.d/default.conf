server {
    listen 8143 ssl;
    server_name dougongyun.com;
    
    ssl_certificate /etc/nginx/ssl/dougongyun.com.crt;
    ssl_certificate_key /etc/nginx/ssl/dougongyun.com.key;
    
    # SSL配置
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;
    ssl_ciphers 'EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH';
    
    location / {
        proxy_pass http://api:8000;

        # 核心配置：允许最大 100MB 的请求体
        client_max_body_size 100M;
    }

    location /jaeger/ {
        proxy_pass http://jaeger:16686;
        
        client_max_body_size 5M;
    }

    location /prometheus/ {
        proxy_pass http://prometheus:9090;
    }
}
