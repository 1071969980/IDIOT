{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Docker Compose Up with Debug",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--project-name=idiot",
        "-f",
        "./docker/docker-compose.yml",
        "up",
        "-d",
        "--build"
      ],
      "options": {
        "env": {
          "API_DEBUG": "1",
          "API_DEBUG_PORT": "5678",
          "API_DEBUG_EXPOSED_PORT": "5678"
        }
      },
    },
    {
      "label": "Docker Compose Rebuild&Run API Debug",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--project-name=idiot",
        "-f",
        "./docker/docker-compose.yml",
        "up",
        "-d",
        "--build",
        "api"
      ],
      "options": {
        "env": {
          "API_DEBUG": "1",
          "API_DEBUG_PORT": "5678",
          "API_DEBUG_EXPOSED_PORT": "5678"
        }
      },
    },
    {
      "label": "Docker Compose Up",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--project-name=idiot",
        "-f",
        "./docker/docker-compose.yml",
        "up",
        "-d",
        "--build"
      ],
      "options": {
        "env": {
          // "API_DEBUG": "1",
          // "API_DEBUG_PORT": "5678",
          // "API_DEBUG_EXPOSED_PORT": "5678"
        }
      },
    },
    {
      "label": "Docker Compose Down Debug",
      "type": "shell",
      "command": "docker",
      "args": [
        "compose",
        "--project-name=idiot",
        "-f",
        "./docker/docker-compose.yml",
        "down"
      ],
    },
    {
      "label": "Start Jaeger Container",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "-it",
        "--rm",
        "--name", "jaeger",
        "-p", "16686:16686",
        "-p", "4318:4318",
        "-v", "./jaeger/config.yaml:/jaeger/config.yaml",
        // have to create ./jaeger_cache and chmod 777 it before starting jaeger
        "-v", "./jaeger_cache:/home/jaeger",
        "jaegertracing/jaeger:2.7.0",
        "--config", "/jaeger/config.yaml"
      ],
      "group": "none",
      "isBackground": true,
      "detail": "Runs Jaeger container",
    },
  ]
}